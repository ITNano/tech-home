<html>
    <head>
        <title>Tech home</title>
        <link rel = "stylesheet" type = "text/css" href = "styles/main.css" />
        <script type = "text/javascript" src = "scripts/jquery.js"></script>
        <script type = "text/javascript" src = "scripts/main.js"></script>
    </head>
    <body onload = "$('#navigation ul li:nth(0) a').click();">
        <div id = "black_container" onclick = "blackify(true);"></div>
        <div id = "clock" onclick = "hideClock();">
            <div id = "clock_date"></div>
            <div id = "clock_time"></div>
        </div>
        <div id = "content">
            <div id = "activity_bar">
                <img id = "menu_toggler" src = "imgs/menu_toggler.png" onclick = "toggleMenu();return false;">
                <div id = "page_name">Home page</div>
            </div>
            <div id = "navigation">
                <ul>
                    <li><a href = "pages/bulbs.html" target = "page_viewer" onclick = "activatedPage(this.innerHTML);">Control bulbs</a></li>
                    <li><a href = "pages/movies.html" target = "page_viewer" onclick = "activatedPage(this.innerHTML);">Movies & series</a></li>
                    <li><a href = "pages/foodz.html" target = "page_viewer" onclick = "activatedPage(this.innerHTML);">Handle food</a></li>
                    <li><a href = "pages/about.html" target = "page_viewer" onclick = "activatedPage(this.innerHTML);">About</a></li>
                    <li><a href = "#" onclick = "showClock();">Show clock</a></li>
                    <li><a href = "#" onclick = "blackify();">Blackout screen</a></li>
                </ul>
            </div>
            <iframe src = "pages/bulbs.html" id = "page_viewer" name = "page_viewer" frameborder = "0"></iframe>
        </div>
        
        <script type = "text/javascript">
            var clockTimer;
            
            runClock();
            resetClockTimer();
        
            function toggleMenu(){
                var nav = $('#navigation');
                if(nav.css('left') != '0px'){
                    openMenu();
                }else{
                    closeMenu();
                }
                resetClockTimer();
            }
            
            function openMenu(){
                $('#navigation').css('left', '0px');
            }
            
            function closeMenu(){
                console.log('close');
                $('#navigation').css('left', (-$('#navigation').width()*2)+'px');
            }
            
            function activatedPage(page){
                $('#page_name').html(page);
                closeMenu(true);
            }
            
            function runClock(){
                var date = new Date();
                var months = ['Januari', 'Februari', 'Mars', 'April', 'Maj', 'Juni', 'Juli', 'Augusti', 'September', 'Oktober', 'November', 'December'];
                $('#clock_date').text(date.getDate()+' '+months[date.getMonth()]);
                $('#clock_time').text(twoDigit(date.getHours()) + ':' + twoDigit(date.getMinutes()) + ':' + twoDigit(date.getSeconds()));
                setTimeout(runClock, 1000);
            }
            
            function twoDigit(num){
                return (num<10 ? '0'+num : ''+num);
            }
            
            function resetClockTimer(){
                if(clockTimer){
                    clearTimeout(clockTimer);
                }
                clockTimer = setTimeout(showClock, 2000*60);
            }
            
            function showClock(){
                //Check that black mode isn't running.
                if($('#black_container').css('display') == 'none'){
                    $('#clock').show()
                }
            }
            
            function hideClock(){
                $('#clock').hide()
                resetClockTimer();
            }
            
            function blackify(off){ 
                if(!off){
                    $('#black_container').show();
                    hideClock();
                    closeMenu();
                }else{
                    $('#black_container').hide();
                    resetClockTimer();
                }
            }
        </script>
    </body>
</html>